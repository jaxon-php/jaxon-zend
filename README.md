Jaxon Library for Zend Framework
================================

This package integrates the [Jaxon library](https://github.com/jaxon-php/jaxon-core) with the Zend Framework 2.

Features
--------

- Automatically register Jaxon classes from a preset directory.
- Read Jaxon options from a config file.

Installation
------------

Add the following lines in the `composer.json` file, and run the `composer update` command.
```json
"require": {
    "jaxon-php/jaxon-zend": "1.0.*"
}
```

Add the Jaxon module to the `modules` entry in the `config/application.config.php` config file.
```php
    'modules' => array(
        'Application',
        'Jaxon\Zend',
    ),
```

Add the Jaxon controller plugin to the `controller_plugins` entry in the `config/module.config.php` config file of the `Application` module.
```php
    'controller_plugins' => array(
        'invokables' => array(
            'jaxon' => 'Jaxon\Zend\Controller\Plugin\Jaxon',
        )
    ),
```

Configuration
-------------

The config of the Jaxon library is defined in the `config/jaxon.config.php` file.
A sample config file is provided in the examples repo online at [https://github.com/jaxon-php/jaxon-examples/blob/master/frameworks/zend/config/jaxon.config.php](https://github.com/jaxon-php/jaxon-examples/blob/master/frameworks/zend/config/jaxon.config.php).

The settings in the `config/jaxon.config.php` config file are separated into two sections.
The options in the `lib` section are those of the Jaxon core library, while the options in the `app` sections are those of the Zend Framework application.

The following options can be defined in the `app` section of the config file.

| Name      | Default value   | Description |
|-----------|-----------------|-------------|
| dir       | {app_dir}/jaxon | The directory of the Jaxon classes |
| namespace | \Jaxon\App      | The namespace of the Jaxon classes |
| excluded  | empty array     | Prevent Jaxon from exporting some methods |
| | | |

Usage
-----

This is an example of a Zend Framework controller using the Jaxon library.
```php
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

class DemoController extends AbstractActionController
{
    public function indexAction()
    {
        // Call the Jaxon module
        $jaxon = $this->jaxon();
        $jaxon->register();

        $view = new ViewModel(array(
            'JaxonCss' => $jaxon->css(),
            'JaxonJs' => $jaxon->js(),
            'JaxonScript' => $jaxon->script(),
        ));
        $view->setTemplate('demo/index');
        return $view;
    }
}
```

Before it prints the page, the controller makes a call to `$jaxon->register()` to export the Jaxon classes.
Then it calls the `$jaxon->css()`, `$jaxon->js()` and `$jaxon->script()` functions to get the CSS and javascript codes generated by Jaxon, which it inserts in the page.

### The Jaxon classes

The Jaxon classes of the application must all be located in the directory indicated by the `app.dir` option in the `config/jaxon.config.php` config file.
If there is a namespace associated, the `app.namespace` option should be set accordingly.
The `app.namespace` option must be explicitely set to `null`, `false` or an empty string if there is no namespace.

By default, the Jaxon classes are loaded from the `jaxon` dir at the root of the Zend Framework application, and the associated namespace is `\Jaxon\App`.

Contribute
----------

- Issue Tracker: github.com/jaxon-php/jaxon-zend/issues
- Source Code: github.com/jaxon-php/jaxon-zend

License
-------

The project is licensed under the BSD license.
